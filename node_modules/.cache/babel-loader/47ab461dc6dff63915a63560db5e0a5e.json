{"ast":null,"code":"import \"antd-mobile/lib/pull-to-refresh/style/css\";\nimport _PullToRefresh from \"antd-mobile/lib/pull-to-refresh\";\nimport \"antd-mobile/lib/list-view/style/css\";\nimport _ListView from \"antd-mobile/lib/list-view\";\nimport \"antd-mobile/lib/carousel/style/css\";\nimport _Carousel from \"antd-mobile/lib/carousel\";\nvar _jsxFileName = \"/Users/gaomengzhou/Projects/kedou/src/components/BookTabContent/index.jsx\";\nimport React, { Component } from 'react';\nimport { bookList as getBookList } from '../../services/book';\nimport BookListContent from '../BookListContent';\nimport ListTitle from '../ListTitle';\nimport { bannel_list } from '../../services/bannel';\n\nclass index extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onRefresh = async () => {\n      await this.setState({\n        isRefreshing: true\n      });\n\n      switch (this.props.tab.title) {\n        case this.props.tabList[0].title:\n          {\n            let newList;\n            let hotList;\n            let obj;\n            await getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: 1,\n              rows: 10,\n              order: \"created_date\",\n              sort: \"created_date\"\n            }).then(res => {\n              newList = res;\n            });\n            await getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: 1,\n              rows: 10,\n              order: \"play\"\n            }).then(ret => {\n              hotList = ret;\n              obj = {\n                newList,\n                hotList\n              };\n            });\n            await this.setState({\n              bookList: obj\n            });\n            break;\n          }\n\n        case this.props.tabList[1].title:\n          {\n            await getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: 1,\n              rows: 20,\n              order: \"created_date\",\n              sort: \"created_date\"\n            }).then(res => {\n              this.setState({\n                bookList: res\n              });\n            });\n            break;\n          }\n\n        case this.props.tabList[2].title:\n          {\n            await getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: 1,\n              rows: 20,\n              order: \"play\"\n            }).then(res => {\n              this.setState({\n                bookList: res\n              });\n            });\n            break;\n          }\n\n        default:\n          {\n            await getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: 1,\n              rows: 20,\n              category_id: this.props.tab.category_id\n            }).then(res => {\n              this.setState({\n                bookList: res\n              });\n            });\n          }\n      }\n\n      const bookList = await JSON.parse(JSON.stringify(this.state.bookList));\n      await this.setState({\n        bookList,\n        page: 1,\n        isRefreshing: false,\n        dataSource: this.state.dataSource.cloneWithRows(bookList),\n        noMore: false\n      });\n    };\n\n    this.concatList = () => {\n      const list = this.state.bookList;\n\n      switch (this.props.tab.title) {\n        case this.props.tabList[1].title:\n          {\n            getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: this.state.page + 1,\n              rows: 10,\n              order: \"created_date\",\n              sort: \"created_date\"\n            }).then(res => {\n              if (res.length === 0) {\n                this.setState({\n                  noMore: true\n                });\n                return;\n              }\n\n              const bookList = list.concat(res);\n              this.setState({\n                bookList,\n                page: this.state.page + 1,\n                rows: 20,\n                dataSource: this.state.dataSource.cloneWithRows(bookList)\n              });\n            });\n            break;\n          }\n\n        case this.props.tabList[2].title:\n          {\n            getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: this.state.page + 1,\n              rows: 10,\n              order: \"play\"\n            }).then(res => {\n              if (res.length === 0) {\n                this.setState({\n                  noMore: true\n                });\n                return;\n              }\n\n              const bookList = list.concat(res);\n              this.setState({\n                bookList,\n                page: this.state.page + 1,\n                rows: 20,\n                dataSource: this.state.dataSource.cloneWithRows(bookList)\n              });\n            });\n            break;\n          }\n\n        default:\n          {\n            getBookList({\n              user_id: sessionStorage.getItem('user_id') || '',\n              page: this.state.page + 1,\n              rows: 10,\n              category_id: this.props.tab.category_id\n            }).then(res => {\n              if (res.length === 0) {\n                this.setState({\n                  noMore: true\n                });\n                return;\n              }\n\n              const bookList = list.concat(res);\n              this.setState({\n                bookList,\n                page: this.state.page + 1,\n                rows: 20,\n                dataSource: this.state.dataSource.cloneWithRows(bookList)\n              });\n            });\n            break;\n          }\n      }\n    };\n\n    this.onEndReached = () => {\n      let loading = true;\n\n      if (this.state.noMore) {\n        return false;\n      }\n\n      this.setState({\n        isLoading: true\n      });\n\n      if (loading) {\n        this.concatList();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n      loading = false;\n    };\n\n    this.scrollDirect = () => {\n      const _this = this;\n\n      var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n      window.addEventListener(\"scroll\", function () {\n        var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n            delta = afterScrollTop - beforeScrollTop;\n        if (delta === 0) return false;\n        const scroll = delta > 0 ? \"down\" : \"up\";\n        const stateScroll = _this.state.scroll;\n\n        if (document.querySelector('.am-tabs-tab-bar-wrap') && document.querySelector('.header-search') && document.querySelector('.background') && document.querySelector('.am-tab-bar-bar')) {\n          if (afterScrollTop > 150) {\n            if (scroll !== stateScroll || !stateScroll) {\n              if (scroll === 'down' && afterScrollTop > 100) {\n                document.querySelector('.am-tabs-tab-bar-wrap').style.top = '-2rem';\n                document.querySelector('.header-search').style.top = '-2rem';\n                document.querySelector('.background').style.top = '-2rem';\n                document.querySelector('.am-tab-bar-bar').style.bottom = '-2rem';\n              } else {\n                document.querySelector('.background').style.top = '0rem';\n                document.querySelector('.header-search').style.top = '0rem';\n                document.querySelector('.am-tabs-tab-bar-wrap').style.top = '1rem';\n                document.querySelector('.am-tab-bar-bar').style.bottom = '0';\n              }\n\n              _this.setState({\n                scroll: delta > 0 ? \"down\" : \"up\"\n              });\n            }\n          }\n        } else {\n          return null;\n        }\n\n        beforeScrollTop = afterScrollTop;\n      }, false);\n    };\n\n    this.listHeader = () => {\n      if (this.state.bannel.length === 0) {\n        return false;\n      }\n\n      return React.createElement(_Carousel, {\n        autoplay: true,\n        infinite: true,\n        selectedIndex: 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, this.state.bannel.map(val => React.createElement(\"img\", {\n        src: val.url,\n        alt: \"\\u6B63\\u5728\\u52A0\\u8F7D\\u56FE\\u7247\",\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      })));\n    };\n\n    this.state = {\n      isLoading: false,\n      noMore: false,\n      isRefreshing: true,\n      dataSource: new _ListView.DataSource({\n        rowHasChanged: (row1, row2) => row1 !== row2\n      }),\n      bannel: [],\n      bookList: []\n    };\n  }\n\n  async componentDidMount() {\n    await bannel_list({\n      type: 1\n    }).then(res => {\n      console.log(res);\n      this.setState({\n        bannel: res\n      });\n    });\n    await bannel_list({\n      type: 3\n    }).then(res => {\n      console.log(res); // this.setState({\n      // \tbannel: res\n      // })\n    });\n    await this.onRefresh();\n  }\n\n  render() {\n    const _this$state = this.state,\n          dataSource = _this$state.dataSource,\n          isRefreshing = _this$state.isRefreshing,\n          noMore = _this$state.noMore,\n          _this$props = this.props,\n          getBooKDetail = _this$props.getBooKDetail,\n          testRightCallBack = _this$props.testRightCallBack,\n          onRefresh = this.onRefresh,\n          onEndReached = this.onEndReached,\n          listHeader = this.listHeader;\n    const contentStyle = {\n      display: 'flex',\n      justifyContent: 'space-between',\n      flexDirection: 'row',\n      flexWrap: 'wrap' // justifyContent:'left'\n\n    };\n\n    switch (this.props.tab.title) {\n      case this.props.tabList[0].title:\n        {\n          return React.createElement(\"div\", {\n            id: \"bookHomeList\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 306\n            },\n            __self: this\n          }, React.createElement(_ListView, {\n            dataSource: dataSource,\n            renderHeader: () => listHeader(),\n            renderRow: (rowData, sectionID, rowID) => {\n              console.log(rowData);\n              return React.createElement(React.Fragment, null, rowID === 'newList' && React.createElement(React.Fragment, null, React.createElement(ListTitle, {\n                title: '最新小说',\n                more: true,\n                changeActionKey: this.props.changeActionKey,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 316\n                },\n                __self: this\n              }), React.createElement(\"div\", {\n                style: contentStyle,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 317\n                },\n                __self: this\n              }, rowData.map((ev, i) => {\n                const info = {\n                  ev,\n                  rowID,\n                  getBooKDetail,\n                  testRightCallBack // setCollect,\n                  // collectSucceed\n\n                };\n                return React.createElement(BookListContent, Object.assign({\n                  key: i\n                }, info, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 328\n                  },\n                  __self: this\n                }));\n              }))), rowID === 'hotList' && React.createElement(React.Fragment, null, React.createElement(ListTitle, {\n                title: '最热小说',\n                more: true,\n                changeActionKey: this.props.changeActionKey,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 337\n                },\n                __self: this\n              }), React.createElement(\"div\", {\n                style: contentStyle,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 338\n                },\n                __self: this\n              }, rowData.map((ev, i) => {\n                const info = {\n                  ev,\n                  rowID,\n                  getBooKDetail,\n                  testRightCallBack // setCollect,\n                  // collectSucceed\n\n                };\n                return React.createElement(BookListContent, Object.assign({\n                  key: i\n                }, info, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 349\n                  },\n                  __self: this\n                }));\n              }))));\n            },\n            useBodyScroll: true,\n            pullToRefresh: React.createElement(_PullToRefresh, {\n              refreshing: isRefreshing,\n              onRefresh: onRefresh,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 360\n              },\n              __self: this\n            }) // onEndReachedThreshold={10}\n            ,\n            onScroll: () => {\n              if (document.querySelector('.background') && document.querySelector('.header-search') && document.querySelector('.am-tabs-tab-bar-wrap') && document.querySelector('.am-tab-bar-bar')) {\n                this.scrollDirect();\n              } else {\n                return false;\n              }\n            },\n            scrollEventThrottle: 11111111110 // onEndReached={onEndReached}\n            ,\n            renderFooter: () => React.createElement(\"div\", {\n              style: {\n                padding: 30,\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 375\n              },\n              __self: this\n            }, this.state.isLoading ? 'Loading...' : noMore ? '没有更多了' : ''),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 307\n            },\n            __self: this\n          }));\n        }\n\n      case this.props.tabList[1].title:\n      case this.props.tabList[2].title:\n        {\n          return React.createElement(\"div\", {\n            className: \"tabsList\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 384\n            },\n            __self: this\n          }, React.createElement(_ListView, {\n            dataSource: dataSource,\n            renderRow: (rowData, sectionID, rowID) => {\n              console.log(rowData);\n              const info = {\n                rowData,\n                rowID,\n                getBooKDetail,\n                testRightCallBack // setCollect,\n                // collectSucceed\n\n              };\n              return React.createElement(React.Fragment, null, React.createElement(BookListContent, Object.assign({\n                key: rowData.id\n              }, info, {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 400\n                },\n                __self: this\n              })));\n            },\n            useBodyScroll: true,\n            pullToRefresh: React.createElement(_PullToRefresh, {\n              refreshing: isRefreshing,\n              onRefresh: onRefresh,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 405\n              },\n              __self: this\n            }),\n            onEndReachedThreshold: 10,\n            onEndReached: onEndReached,\n            pageSize: 10,\n            renderFooter: () => React.createElement(\"div\", {\n              style: {\n                padding: 30,\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 412\n              },\n              __self: this\n            }, this.state.isLoading ? 'Loading...' : noMore ? '没有更多了' : ''),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 385\n            },\n            __self: this\n          }));\n        }\n\n      default:\n        {\n          return React.createElement(\"div\", {\n            className: \"tabsList\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 421\n            },\n            __self: this\n          }, React.createElement(_ListView, {\n            dataSource: dataSource,\n            renderRow: (rowData, sectionID, rowID) => {\n              const info = {\n                rowData,\n                rowID,\n                getBooKDetail,\n                testRightCallBack // setCollect,\n                // collectSucceed\n\n              };\n              return React.createElement(React.Fragment, null, React.createElement(BookListContent, Object.assign({\n                key: rowData.id\n              }, info, {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 435\n                },\n                __self: this\n              })));\n            },\n            useBodyScroll: true,\n            pullToRefresh: React.createElement(_PullToRefresh, {\n              refreshing: isRefreshing,\n              onRefresh: onRefresh,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 440\n              },\n              __self: this\n            }),\n            onEndReachedThreshold: 10,\n            onEndReached: onEndReached,\n            pageSize: 10,\n            renderFooter: () => React.createElement(\"div\", {\n              style: {\n                padding: 30,\n                textAlign: 'center'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 447\n              },\n              __self: this\n            }, this.state.isLoading ? 'Loading...' : noMore ? '没有更多了' : ''),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 422\n            },\n            __self: this\n          }));\n        }\n    }\n  }\n\n}\n\nexport default index;","map":{"version":3,"sources":["/Users/gaomengzhou/Projects/kedou/src/components/BookTabContent/index.jsx"],"names":["React","Component","bookList","getBookList","BookListContent","ListTitle","bannel_list","index","constructor","props","onRefresh","setState","isRefreshing","tab","title","tabList","newList","hotList","obj","user_id","sessionStorage","getItem","page","rows","order","sort","then","res","ret","category_id","JSON","parse","stringify","state","dataSource","cloneWithRows","noMore","concatList","list","length","concat","onEndReached","loading","isLoading","scrollDirect","_this","beforeScrollTop","document","documentElement","scrollTop","body","window","addEventListener","afterScrollTop","delta","scroll","stateScroll","querySelector","style","top","bottom","listHeader","bannel","map","val","url","width","height","DataSource","rowHasChanged","row1","row2","componentDidMount","type","console","log","render","getBooKDetail","testRightCallBack","contentStyle","display","justifyContent","flexDirection","flexWrap","rowData","sectionID","rowID","changeActionKey","ev","i","info","padding","textAlign","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { PullToRefresh, ListView, Carousel } from 'antd-mobile';\nimport { bookList as getBookList } from '../../services/book'\nimport BookListContent from '../BookListContent'\nimport ListTitle from '../ListTitle'\nimport { bannel_list } from '../../services/bannel'\nclass index extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tisLoading: false,\n\t\t\tnoMore: false,\n\t\t\tisRefreshing: true,\n\t\t\tdataSource: new ListView.DataSource({\n\t\t\t\trowHasChanged: (row1, row2) => row1 !== row2,\n\t\t\t}),\n\t\t\tbannel: [],\n\t\t\tbookList: []\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tawait bannel_list({\n\t\t\ttype: 1\n\t\t}).then(res => {\n\t\t\tconsole.log(res);\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tbannel: res\n\t\t\t})\n\n\t\t})\n\t\tawait bannel_list({\n\t\t\ttype: 3\n\t\t}).then(res => {\n\t\t\tconsole.log(res);\n\t\t\t\n\t\t\t// this.setState({\n\t\t\t// \tbannel: res\n\t\t\t// })\n\n\t\t})\n\t\tawait this.onRefresh()\n\t}\n\n\tonRefresh = async () => {\n\t\tawait this.setState({\n\t\t\tisRefreshing: true\n\t\t})\n\t\tswitch (this.props.tab.title) {\n\t\t\tcase this.props.tabList[0].title: {\n\t\t\t\tlet newList;\n\t\t\t\tlet hotList;\n\t\t\t\tlet obj;\n\t\t\t\tawait getBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: 1,\n\t\t\t\t\trows: 10,\n\t\t\t\t\torder: \"created_date\",\n\t\t\t\t\tsort: \"created_date\"\n\t\t\t\t}).then(res => {\n\t\t\t\t\tnewList = res\n\t\t\t\t})\n\t\t\t\tawait getBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: 1,\n\t\t\t\t\trows: 10,\n\t\t\t\t\torder: \"play\",\n\t\t\t\t}).then(ret => {\n\t\t\t\t\thotList = ret\n\t\t\t\t\tobj = {\n\t\t\t\t\t\tnewList,\n\t\t\t\t\t\thotList\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tawait this.setState({\n\t\t\t\t\tbookList: obj\n\t\t\t\t})\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase this.props.tabList[1].title: {\n\t\t\t\tawait getBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: 1,\n\t\t\t\t\trows: 20,\n\t\t\t\t\torder: \"created_date\",\n\t\t\t\t\tsort: \"created_date\"\n\t\t\t\t}).then(res => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tbookList: res\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase this.props.tabList[2].title: {\n\t\t\t\tawait getBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: 1,\n\t\t\t\t\trows: 20,\n\t\t\t\t\torder: \"play\",\n\t\t\t\t}).then(res => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tbookList: res\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tawait getBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: 1,\n\t\t\t\t\trows: 20,\n\t\t\t\t\tcategory_id: this.props.tab.category_id\n\t\t\t\t}).then(res => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tbookList: res\n\t\t\t\t\t})\n\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tconst bookList = await JSON.parse(JSON.stringify(this.state.bookList))\n\n\t\tawait this.setState({\n\t\t\tbookList,\n\t\t\tpage: 1,\n\t\t\tisRefreshing: false,\n\t\t\tdataSource: this.state.dataSource.cloneWithRows(bookList),\n\t\t\tnoMore: false,\n\t\t})\n\t}\n\tconcatList = () => {\n\t\tconst list = this.state.bookList\n\t\tswitch (this.props.tab.title) {\n\t\t\tcase this.props.tabList[1].title: {\n\t\t\t\tgetBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: this.state.page + 1,\n\t\t\t\t\trows: 10,\n\t\t\t\t\torder: \"created_date\",\n\t\t\t\t\tsort: \"created_date\"\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.length === 0) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tnoMore: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tconst bookList = list.concat(res)\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tbookList,\n\t\t\t\t\t\tpage: this.state.page + 1,\n\t\t\t\t\t\trows: 20,\n\t\t\t\t\t\tdataSource: this.state.dataSource.cloneWithRows(bookList),\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase this.props.tabList[2].title: {\n\t\t\t\tgetBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: this.state.page+1,\n\t\t\t\t\trows: 10,\n\t\t\t\t\torder: \"play\",\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.length === 0) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tnoMore: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tconst bookList = list.concat(res)\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tbookList,\n\t\t\t\t\t\tpage: this.state.page + 1,\n\t\t\t\t\t\trows: 20,\n\t\t\t\t\t\tdataSource: this.state.dataSource.cloneWithRows(bookList),\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tgetBookList({\n\t\t\t\t\tuser_id:sessionStorage.getItem('user_id')||'',\n\t\t\t\t\tpage: this.state.page+1,\n\t\t\t\t\trows: 10,\n\t\t\t\t\tcategory_id:this.props.tab.category_id\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.length === 0) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tnoMore: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tconst bookList = list.concat(res)\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tbookList,\n\t\t\t\t\t\tpage: this.state.page + 1,\n\t\t\t\t\t\trows: 20,\n\t\t\t\t\t\tdataSource: this.state.dataSource.cloneWithRows(bookList),\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t}\n\tonEndReached = () => {\n\t\tlet loading = true\n\t\tif (this.state.noMore) {\n\t\t\treturn false\n\t\t}\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t})\n\t\tif (loading) {\n\t\t\tthis.concatList()\n\t\t}\n\t\tthis.setState({\n\t\t\tisLoading: false\n\t\t})\n\t\tloading = false\n\t}\n\tscrollDirect = () => {\n\t\tconst _this = this\n\t\tvar beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop\n\t\twindow.addEventListener(\"scroll\", function () {\n\t\t\tvar afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n\t\t\t\tdelta = afterScrollTop - beforeScrollTop;\n\t\t\tif (delta === 0) return false;\n\t\t\tconst scroll = delta > 0 ? \"down\" : \"up\"\n\t\t\tconst stateScroll = _this.state.scroll\n\t\t\tif (document.querySelector('.am-tabs-tab-bar-wrap') && document.querySelector('.header-search') && document.querySelector('.background') && document.querySelector('.am-tab-bar-bar')) {\n\t\t\t\tif (afterScrollTop > 150) {\n\t\t\t\t\tif (scroll !== stateScroll || !stateScroll) {\n\t\t\t\t\t\tif (scroll === 'down' && afterScrollTop > 100) {\n\t\t\t\t\t\t\tdocument.querySelector('.am-tabs-tab-bar-wrap').style.top = '-2rem'\n\t\t\t\t\t\t\tdocument.querySelector('.header-search').style.top = '-2rem'\n\t\t\t\t\t\t\tdocument.querySelector('.background').style.top = '-2rem'\n\t\t\t\t\t\t\tdocument.querySelector('.am-tab-bar-bar').style.bottom = '-2rem'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.querySelector('.background').style.top = '0rem'\n\t\t\t\t\t\t\tdocument.querySelector('.header-search').style.top = '0rem'\n\t\t\t\t\t\t\tdocument.querySelector('.am-tabs-tab-bar-wrap').style.top = '1rem'\n\t\t\t\t\t\t\tdocument.querySelector('.am-tab-bar-bar').style.bottom = '0'\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.setState({\n\t\t\t\t\t\t\tscroll: delta > 0 ? \"down\" : \"up\"\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tbeforeScrollTop = afterScrollTop;\n\t\t}, false);\n\t}\n\tlistHeader = () => {\n\t\tif(this.state.bannel.length===0){\n\t\t\treturn false\n\t\t}\n\t\treturn (\n\t\t\t<Carousel\n\t\t\t\tautoplay={true}\n\t\t\t\tinfinite={true}\n\t\t\t\tselectedIndex={0}\n\t\t\t>\n\t\t\t\t{this.state.bannel.map(val => (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={val.url}\n\t\t\t\t\t\talt=\"正在加载图片\"\n\t\t\t\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</Carousel>\n\t\t)\n\t}\n\trender() {\n\t\tconst {\n\t\t\tstate: {\n\t\t\t\tdataSource,\n\t\t\t\tisRefreshing,\n\t\t\t\tnoMore\n\t\t\t},\n\t\t\tprops:{\n\t\t\t\tgetBooKDetail,\n\t\t\t\ttestRightCallBack\n\t\t\t},\n\t\t\tonRefresh,\n\t\t\tonEndReached,\n\t\t\tlistHeader\n\t\t} = this\n\n\t\tconst contentStyle = {\n\t\t\tdisplay: 'flex',\n\t\t\tjustifyContent: 'space-between',\n\t\t\tflexDirection: 'row',\n\t\t\tflexWrap: 'wrap'\n\t\t\t// justifyContent:'left'\n\t\t}\n\n\t\tswitch (this.props.tab.title) {\n\t\t\tcase this.props.tabList[0].title: {\n\t\t\t\treturn (\n\t\t\t\t\t<div id=\"bookHomeList\">\n\t\t\t\t\t\t<ListView\n\t\t\t\t\t\tdataSource={dataSource}\n\t\t\t\t\t\trenderHeader={() => listHeader()}\n\t\t\t\t\t\trenderRow={(rowData, sectionID, rowID) => {\n\t\t\t\t\t\t\tconsole.log(rowData);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{rowID === 'newList' &&\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<\tListTitle title={'最新小说'} more={true} changeActionKey={this.props.changeActionKey} />\n\t\t\t\t\t\t\t\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t\t\t\t\t\t\t\t{rowData.map((ev, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst info = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tev,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trowID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBooKDetail,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttestRightCallBack\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// setCollect,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// collectSucceed\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<BookListContent key={i} {...info} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{rowID === 'hotList' &&\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<\tListTitle title={'最热小说'} more={true} changeActionKey={this.props.changeActionKey} />\n\t\t\t\t\t\t\t\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t\t\t\t\t\t\t\t{rowData.map((ev, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst info = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tev,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trowID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBooKDetail,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttestRightCallBack\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// setCollect,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// collectSucceed\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<BookListContent key={i} {...info} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tuseBodyScroll={true}\n\t\t\t\t\t\tpullToRefresh={<PullToRefresh\n\t\t\t\t\t\t\trefreshing={isRefreshing}\n\t\t\t\t\t\t\tonRefresh={onRefresh}\n\t\t\t\t\t\t/>}\n\t\t\t\t\t\t// onEndReachedThreshold={10}\n\t\t\t\t\t\tonScroll={() => {\n\t\t\t\t\t\t\tif (document.querySelector('.background') && document.querySelector('.header-search') && document.querySelector('.am-tabs-tab-bar-wrap') && document.querySelector('.am-tab-bar-bar')) {\n\t\t\t\t\t\t\t\tthis.scrollDirect()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscrollEventThrottle={11111111110}\n\t\t\t\t\t\t// onEndReached={onEndReached}\n\t\t\t\t\t\trenderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\n\t\t\t\t\t\t\t{this.state.isLoading ? 'Loading...' : (noMore ? '没有更多了' : '')}\n\t\t\t\t\t\t</div>)}\n\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase this.props.tabList[1].title: case this.props.tabList[2].title: {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"tabsList\">\n\t\t\t\t\t\t<ListView\n\t\t\t\t\t\t\tdataSource={dataSource}\n\t\t\t\t\t\t\trenderRow={(rowData, sectionID, rowID) => {\n\t\t\t\t\t\t\t\tconsole.log(rowData);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconst info = {\n\t\t\t\t\t\t\t\t\trowData,\n\t\t\t\t\t\t\t\t\trowID,\n\t\t\t\t\t\t\t\t\tgetBooKDetail,\n\t\t\t\t\t\t\t\t\ttestRightCallBack\n\t\t\t\t\t\t\t\t\t// setCollect,\n\t\t\t\t\t\t\t\t\t// collectSucceed\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<BookListContent key={rowData.id} {...info} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tuseBodyScroll={true}\n\t\t\t\t\t\t\tpullToRefresh={<PullToRefresh\n\t\t\t\t\t\t\t\trefreshing={isRefreshing}\n\t\t\t\t\t\t\t\tonRefresh={onRefresh}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\tonEndReachedThreshold={10}\n\t\t\t\t\t\t\tonEndReached={onEndReached}\n\t\t\t\t\t\t\tpageSize={10}\n\t\t\t\t\t\t\trenderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t{this.state.isLoading ? 'Loading...' : (noMore ? '没有更多了' : '')}\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"tabsList\">\n\t\t\t\t\t\t<ListView\n\t\t\t\t\t\t\tdataSource={dataSource}\n\t\t\t\t\t\t\trenderRow={(rowData, sectionID, rowID) => {\n\t\t\t\t\t\t\t\tconst info = {\n\t\t\t\t\t\t\t\t\trowData,\n\t\t\t\t\t\t\t\t\trowID,\n\t\t\t\t\t\t\t\t\tgetBooKDetail,\n\t\t\t\t\t\t\t\t\ttestRightCallBack\n\t\t\t\t\t\t\t\t\t// setCollect,\n\t\t\t\t\t\t\t\t\t// collectSucceed\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<BookListContent key={rowData.id} {...info} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tuseBodyScroll={true}\n\t\t\t\t\t\t\tpullToRefresh={<PullToRefresh\n\t\t\t\t\t\t\t\trefreshing={isRefreshing}\n\t\t\t\t\t\t\t\tonRefresh={onRefresh}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\tonEndReachedThreshold={10}\n\t\t\t\t\t\t\tonEndReached={onEndReached}\n\t\t\t\t\t\t\tpageSize={10}\n\t\t\t\t\t\t\trenderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t{this.state.isLoading ? 'Loading...' : (noMore ? '没有更多了' : '')}\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default index;"]},"metadata":{},"sourceType":"module"}