{"ast":null,"code":"import _objectSpread from \"/Users/gaomengzhou/Projects/kedou/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nvar _jsxFileName = \"/Users/gaomengzhou/Projects/kedou/src/components/BookListContent/index.jsx\";\nimport React, { Component } from 'react';\nimport './index.less';\nimport { collect } from '../../services/book';\n\nclass index extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setCollect = novel_id => {\n      if (!sessionStorage.getItem('user_id')) {\n        this.props.testRightCallBack();\n        return false;\n      }\n\n      collect({\n        user_id: sessionStorage.getItem('user_id'),\n        novel_id: novel_id\n      }).then(res => {\n        if (res.code === 0) {\n          _Toast.info(res.suc, 1, null, false);\n\n          if (res.suc === '取消成功') {\n            this.setState({\n              collectSucceed: false\n            });\n            return false;\n          }\n\n          this.setState({\n            collectSucceed: true\n          });\n        } else {\n          _Toast.info(res.err, 1, null, false);\n        }\n      });\n    };\n\n    this.state = {\n      collectSucceed: false\n    };\n  }\n\n  componentDidMount() {\n    let props = this.props;\n\n    if (!props.ev) {\n      const ev = _objectSpread({}, props.rowData);\n\n      props = _objectSpread({\n        ev\n      }, props);\n    }\n\n    if (props.ev.collected) {\n      this.setState({\n        collectSucceed: true\n      });\n    }\n  }\n\n  render() {\n    let props = this.props;\n\n    if (!props.ev) {\n      const ev = _objectSpread({}, props.rowData);\n\n      props = _objectSpread({\n        ev\n      }, props);\n    }\n\n    const collectSucceed = this.state.collectSucceed;\n    return React.createElement(React.Fragment, null, props && React.createElement(\"div\", {\n      className: \"bookListContent\",\n      onClick: () => {\n        props.getBooKDetail(props.ev.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: props.ev.poster,\n      alt: \"\",\n      className: \"bigIMG\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"play\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('@/assets/images/book_thumbnail_ico.png'),\n      alt: \"\",\n      className: \"icont\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), props.ev.play), React.createElement(\"div\", {\n      className: \"collected\",\n      onClick: e => {\n        e.stopPropagation();\n        this.setCollect(props.ev.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: collectSucceed ? require('@/assets/images/like_pressed_btn.png') : require('@/assets/images/like_nomal_btn.png'),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }))), React.createElement(\"p\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, props.ev.title)));\n  }\n\n}\n\nexport default index; // function index(props) {\n//     if (!props.ev) {\n//         const ev = { ...props.rowData }\n//         props = {\n//             ev,\n//             ...props\n//         }\n//     }\n//     const collectSucceed=[]\n//     if(props.ev.collected){\n//         collectSucceed.push[props.ev.id]\n//     }\n//     return (\n//     )\n// }\n// export default index","map":{"version":3,"sources":["/Users/gaomengzhou/Projects/kedou/src/components/BookListContent/index.jsx"],"names":["React","Component","collect","index","constructor","props","setCollect","novel_id","sessionStorage","getItem","testRightCallBack","user_id","then","res","code","info","suc","setState","collectSucceed","err","state","componentDidMount","ev","rowData","collected","render","getBooKDetail","id","poster","require","play","e","stopPropagation","title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './index.less'\nimport {collect} from '../../services/book'\nimport { Toast } from 'antd-mobile'\n\nclass index extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            collectSucceed: false\n        }\n    }\n    componentDidMount() {\n        let props = this.props\n        if (!props.ev) {\n            const ev = { ...props.rowData }\n            props = {\n                ev,\n                ...props\n            }\n        }\n        if(props.ev.collected){\n            this.setState({\n                collectSucceed:true\n            })\n        }\n    }\n\n    setCollect = (novel_id) => {\n        if (!sessionStorage.getItem('user_id')) {\n            this.props.testRightCallBack()\n            return false\n        }\n        collect({\n            user_id: sessionStorage.getItem('user_id'),\n            novel_id: novel_id\n        }).then(res => {\n            if (res.code === 0) {\n                Toast.info(res.suc,1,null,false)\n                if (res.suc === '取消成功') {\n                    this.setState({\n                        collectSucceed:false\n                    })\n                    return false\n                }\n                this.setState({\n                    collectSucceed: true\n                })\n            } else {\n                Toast.info(res.err,1,null,false)\n            }\n\n        })\n\n    }\n    render() {\n        let props = this.props\n        if (!props.ev) {\n            const ev = { ...props.rowData }\n            props = {\n                ev,\n                ...props\n            }\n        }\n        const {collectSucceed}=this.state\n        return (\n            <>\n                {\n                    props && <div className='bookListContent' onClick={() => {\n                        props.getBooKDetail(props.ev.id)\n                    }}>\n                        <div className=\"img\">\n                            <img src={props.ev.poster} alt=\"\" className='bigIMG' />\n                            <div className='play'>\n                                <img src={require('@/assets/images/book_thumbnail_ico.png')} alt=\"\" className='icont' />{props.ev.play}\n                            </div>\n                            <div className=\"collected\" onClick={(e) => {\n                                e.stopPropagation()\n                                this.setCollect(props.ev.id)\n\n                            }}>\n                                {<img src={collectSucceed ? require('@/assets/images/like_pressed_btn.png') : require('@/assets/images/like_nomal_btn.png')} alt=\"\" />}\n                            </div>\n                        </div>\n                        <p className='title'>\n                            {\n                                props.ev.title\n                            }\n                        </p>\n                    </div>\n                }\n            </>\n        );\n    }\n}\n\nexport default index;\n\n\n\n\n\n// function index(props) {\n//     if (!props.ev) {\n//         const ev = { ...props.rowData }\n//         props = {\n//             ev,\n//             ...props\n//         }\n//     }\n//     const collectSucceed=[]\n//     if(props.ev.collected){\n//         collectSucceed.push[props.ev.id]\n//     }\n\n//     return (\n\n//     )\n// }\n\n// export default index\n"]},"metadata":{},"sourceType":"module"}