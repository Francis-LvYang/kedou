{"ast":null,"code":"import \"antd-mobile/lib/button/style/css\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/checkbox/style/css\";\nimport _Checkbox from \"antd-mobile/lib/checkbox\";\nimport \"antd-mobile/lib/modal/style/css\";\nimport _Modal from \"antd-mobile/lib/modal\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/gaomengzhou/Projects/kedou/src/pages/Collect/index.js\";\n\nimport 'dplayer/dist/DPlayer.min.css';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PublicNavBar from '../../components/PublicNavBar';\nimport { delBoolCollect, getBookCollect, getVideoCollect } from '../../store/action/collect';\nimport TabExample from './components/tabs';\nimport './index.less';\nconst mapDispatchToProps = {\n  getBookCollect,\n  delBoolCollect,\n  getVideoCollect\n};\nlet Collect = (_dec = connect(({\n  userCollect\n}) => ({\n  userCollect\n}), mapDispatchToProps), _dec(_class = (_temp = class Collect extends Component {\n  constructor(props) {\n    super(props);\n\n    this.deleteBtn = () => {\n      if (this.state.page === 1) {\n        if (this.state.ids === '') {\n          return;\n        } else {\n          new Promise(resolve => {\n            this.props.delBoolCollect({\n              ids: this.state.ids,\n              user_id: sessionStorage.getItem('user_id'),\n              resolve\n            });\n          }).then(res => {\n            console.log(res);\n\n            if (res.suc) {\n              new Promise(resolve => {\n                this.props.getBookCollect({\n                  user_id: sessionStorage.getItem('user_id'),\n                  resolve\n                });\n              }).then(res => {\n                console.log(res);\n                this.setState({\n                  bookCollectList: res,\n                  count: 0,\n                  ids: ''\n                });\n              });\n            }\n          });\n        }\n      } else {\n        if (this.state.ids === '') {\n          return;\n        } else {\n          console.log('删视频'); // new Promise(resolve => {\n          //   this.props.delBoolCollect({\n          //     ids: this.state.ids,\n          //     user_id: sessionStorage.getItem('user_id'),\n          //     resolve\n          //   })\n          // }).then(res => {\n          //   console.log(res)\n          //   if (res.suc) {\n          //     new Promise(resolve => {\n          //       this.props.getBookCollect({ user_id: sessionStorage.getItem('user_id'), resolve })\n          //     }).then(res => {\n          //       console.log(res)\n          //       this.setState({\n          //         bookCollectList: res,\n          //         count: 0,\n          //         ids: '',\n          //       })\n          //     })\n          //   }\n          // })\n        }\n      }\n    };\n\n    this.onLeftClick = () => {\n      this.props.history.go(-1);\n    };\n\n    this.onRightClick = () => {\n      const data = JSON.parse(JSON.stringify(this.state.bookCollectList));\n      const data2 = JSON.parse(JSON.stringify(this.state.videoCollectList));\n      this.state.bookCollectList.forEach((item, index, arr) => {\n        data[index].isCheck = false;\n      });\n      this.state.videoCollectList.forEach((item, index, arr) => {\n        data2[index].isCheck = false;\n      });\n      this.setState({\n        isEdit: !this.state.isEdit,\n        count: 0,\n        checkedStatus: false,\n        bookCollectList: data,\n        videoCollectList: data2,\n        ids: ''\n      });\n    };\n\n    this.onTabChange = (v, i) => {\n      //console.log(v, i)\n      this.setState({\n        page: i\n      });\n      const data = JSON.parse(JSON.stringify(this.state.bookCollectList));\n      const data2 = JSON.parse(JSON.stringify(this.state.videoCollectList));\n      this.state.bookCollectList.forEach((item, index, arr) => {\n        data[index].isCheck = false;\n      });\n      this.state.videoCollectList.forEach((item, index, arr) => {\n        data2[index].isCheck = false;\n      });\n      this.setState({\n        checkedStatus: false,\n        bookCollectList: data,\n        videoCollectList: data2,\n        count: 0,\n        ids: ''\n      });\n    };\n\n    this.selectAll = () => {\n      const data = JSON.parse(JSON.stringify(this.state.bookCollectList));\n      const data2 = JSON.parse(JSON.stringify(this.state.videoCollectList));\n      const checkedStatus = this.state.checkedStatus;\n\n      if (this.state.page === 0) {\n        //视频\n        const ids = data2.map(item => item.novel_id);\n\n        if (!this.state.checkedStatus) {\n          this.state.videoCollectList.forEach((item, index, arr) => {\n            data2[index].isCheck = !checkedStatus;\n          });\n          this.setState({\n            checkedStatus: !checkedStatus,\n            videoCollectList: data2,\n            count: data2.length,\n            ids: ids.join(',')\n          });\n        } else {\n          this.state.videoCollectList.forEach((item, index, arr) => {\n            data2[index].isCheck = !checkedStatus;\n          });\n          this.setState({\n            checkedStatus: !checkedStatus,\n            videoCollectList: data2,\n            count: 0,\n            ids: ''\n          });\n        }\n      } else {\n        //听书\n        if (!this.state.checkedStatus) {\n          this.state.bookCollectList.forEach((item, index, arr) => {\n            data[index].isCheck = !checkedStatus;\n          });\n          const ids = data.map(item => item.novel_id);\n          this.setState({\n            checkedStatus: !checkedStatus,\n            bookCollectList: data,\n            count: data.length,\n            ids: ids.join(',')\n          });\n        } else {\n          this.state.bookCollectList.forEach((item, index, arr) => {\n            data[index].isCheck = !checkedStatus;\n          });\n          this.setState({\n            checkedStatus: !checkedStatus,\n            bookCollectList: data,\n            count: 0,\n            ids: ''\n          });\n        }\n      }\n    };\n\n    this.selectOne = (e, index, item) => {\n      console.log(item);\n      const data = JSON.parse(JSON.stringify(this.state.bookCollectList));\n      data[index].isCheck = e.target.checked;\n      const deleteData = data.filter(val => val.isCheck === true);\n      const ids = deleteData.map(val => val.novel_id);\n      console.log(ids.join(','));\n      const flag = data.filter(val => val.isCheck === false);\n\n      if (flag.length === 0) {\n        this.setState({\n          checkedStatus: true\n        });\n      } else {\n        this.setState({\n          checkedStatus: false\n        });\n      }\n\n      this.setState({\n        bookCollectList: data,\n        ids: ids.join(',')\n      });\n\n      if (item.isCheck) {\n        this.setState({\n          count: this.state.count - 1\n        });\n      } else {\n        this.setState({\n          count: this.state.count + 1\n        });\n      }\n    };\n\n    this.selectOne2 = (e, index, item) => {\n      console.log(item);\n      const data = JSON.parse(JSON.stringify(this.state.videoCollectList));\n      data[index].isCheck = e.target.checked;\n      const deleteData = data.filter(val => val.isCheck === true);\n      const ids = deleteData.map(val => val.novel_id);\n      console.log(ids.join(','));\n      const flag = data.filter(val => val.isCheck === false);\n\n      if (flag.length === 0) {\n        this.setState({\n          checkedStatus: true\n        });\n      } else {\n        this.setState({\n          checkedStatus: false\n        });\n      }\n\n      this.setState({\n        videoCollectList: data,\n        ids: ids.join(',')\n      });\n\n      if (item.isCheck) {\n        this.setState({\n          count: this.state.count - 1\n        });\n      } else {\n        this.setState({\n          count: this.state.count + 1\n        });\n      }\n    };\n\n    this.goToBook = item => {\n      console.log(item);\n      window.sessionStorage.setItem('goBack', 'true');\n\n      _Modal.alert('提示', '详情页完善中,请去听书页播放', [{\n        text: '不去',\n        onPress: () => console.log('cancel'),\n        style: 'default'\n      }, {\n        text: '去听书',\n        onPress: () => this.props.history.push(\"/book\")\n      }]);\n    };\n\n    this.goToVideo = item => {\n      window.sessionStorage.setItem('goBack', 'true');\n      const user_id = sessionStorage.getItem('user_id');\n      this.props.history.push(`/detailVideo/video_id=${item.video_id}&user_id=${user_id}`);\n    };\n\n    this.state = {\n      user_id: '',\n      ids: '',\n      //听书id\n      isEdit: false,\n      checkedStatus: false,\n      //全选为true\n      page: 0,\n      //根据tabs页面决定全选哪个版块内容\n      count: 0,\n      //选中了几个\n      bookCollectList: [],\n      //听书收藏数据\n      videoCollectList: [] //视频收藏数据\n\n    };\n  }\n\n  componentDidMount() {\n    new Promise(resolve => {\n      this.props.getBookCollect({\n        user_id: sessionStorage.getItem('user_id'),\n        resolve,\n        rows: '10000'\n      });\n    }).then(res => {\n      console.log(res);\n      this.setState({\n        bookCollectList: res\n      });\n    });\n    new Promise(resolve => {\n      this.props.getVideoCollect({\n        user_id: sessionStorage.getItem('user_id'),\n        type: '2',\n        resolve,\n        rows: '10000'\n      });\n    }).then(res => {\n      console.log('视频res===>', res);\n      this.setState({\n        videoCollectList: res\n      });\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          bookCollectList = _this$state.bookCollectList,\n          videoCollectList = _this$state.videoCollectList;\n    const CheckboxItem = _Checkbox.CheckboxItem;\n    const navBarProps = {\n      title: '我的收藏',\n      edit: true,\n      onLeftClick: this.onLeftClick,\n      onRightClick: this.onRightClick,\n      isEdit: this.state.isEdit\n    };\n\n    const videoTab = () => {\n      return this.state.isEdit ? React.createElement(React.Fragment, null, videoCollectList.map((item, index) => React.createElement(\"label\", {\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(CheckboxItem, {\n        checked: item.isCheck ? true : false,\n        onChange: v => this.selectOne2(v, index, item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"collectContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        src: item.cover_one,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, item.title)))))) : React.createElement(React.Fragment, null, videoCollectList.map(item => React.createElement(\"div\", {\n        key: item.id,\n        className: \"collectContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        onClick: () => this.goToVideo(item),\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        src: item.cover_one,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, item.title))));\n    };\n\n    const bookTab = () => {\n      return this.state.isEdit ? React.createElement(React.Fragment, null, bookCollectList && bookCollectList.map((item, index) => React.createElement(\"label\", {\n        key: item.novel_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(CheckboxItem, {\n        checked: item.isCheck ? true : false,\n        onChange: v => this.selectOne(v, index, item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"collectContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        src: item.poster,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, item.title)))))) : React.createElement(React.Fragment, null, bookCollectList && bookCollectList.map(item => React.createElement(\"div\", {\n        key: item.novel_id,\n        className: \"collectContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        onClick: () => this.goToBook(item),\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        src: item.poster,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, item.title))));\n    };\n\n    const tabs = [{\n      title: '视频'\n    }, {\n      title: '听书'\n    }];\n    return React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#fff'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(PublicNavBar, Object.assign({}, navBarProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    })), React.createElement(TabExample, {\n      tabs: tabs,\n      tabsContent1: videoTab,\n      tabsContent2: bookTab,\n      onTabChange: this.onTabChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: this.state.isEdit ? 'flex' : 'none',\n        justifyContent: 'center',\n        position: 'fixed',\n        width: '100vw',\n        bottom: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      onClick: this.selectAll,\n      style: {\n        flex: '1',\n        borderRadius: 0,\n        color: '#7914ee'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, this.state.checkedStatus ? '反选' : '全选'), React.createElement(_Button, {\n      onClick: this.deleteBtn,\n      style: {\n        flex: '1',\n        borderRadius: 0,\n        color: '#7914ee'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, this.state.count !== 0 ? `删除(${this.state.count})` : '删除')));\n  }\n\n}, _temp)) || _class);\nexport default Collect;","map":{"version":3,"sources":["/Users/gaomengzhou/Projects/kedou/src/pages/Collect/index.js"],"names":["React","Component","connect","PublicNavBar","delBoolCollect","getBookCollect","getVideoCollect","TabExample","mapDispatchToProps","Collect","userCollect","constructor","props","deleteBtn","state","page","ids","Promise","resolve","user_id","sessionStorage","getItem","then","res","console","log","suc","setState","bookCollectList","count","onLeftClick","history","go","onRightClick","data","JSON","parse","stringify","data2","videoCollectList","forEach","item","index","arr","isCheck","isEdit","checkedStatus","onTabChange","v","i","selectAll","map","novel_id","length","join","selectOne","e","target","checked","deleteData","filter","val","flag","selectOne2","goToBook","window","setItem","alert","text","onPress","style","push","goToVideo","video_id","componentDidMount","rows","type","render","CheckboxItem","navBarProps","title","edit","videoTab","id","width","height","cover_one","bookTab","poster","tabs","backgroundColor","display","justifyContent","position","bottom","flex","borderRadius","color"],"mappings":"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","sourcesContent":["import { Button, Checkbox, Modal } from 'antd-mobile';\nimport 'dplayer/dist/DPlayer.min.css';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PublicNavBar from '../../components/PublicNavBar';\nimport { delBoolCollect, getBookCollect, getVideoCollect } from '../../store/action/collect';\nimport TabExample from './components/tabs';\nimport './index.less';\n\nconst mapDispatchToProps = {\n  getBookCollect,\n  delBoolCollect,\n  getVideoCollect\n};\n\n@connect(({ userCollect }) => ({\n  userCollect\n}), mapDispatchToProps)\nclass Collect extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user_id: '',\n      ids: '',//听书id\n      isEdit: false,\n      checkedStatus: false, //全选为true\n      page: 0,//根据tabs页面决定全选哪个版块内容\n      count: 0,//选中了几个\n      bookCollectList: [],//听书收藏数据\n      videoCollectList: [],//视频收藏数据\n    }\n  }\n\n  componentDidMount() {\n    new Promise(resolve => {\n      this.props.getBookCollect({\n        user_id: sessionStorage.getItem('user_id'),\n        resolve,\n        rows: '10000'\n      })\n    }).then(res => {\n      console.log(res)\n      this.setState({\n        bookCollectList: res\n      })\n    });\n\n    new Promise(resolve => {\n      this.props.getVideoCollect({\n        user_id: sessionStorage.getItem('user_id'),\n        type: '2',\n        resolve,\n        rows: '10000'\n      })\n    }).then(res => {\n      console.log('视频res===>', res)\n      this.setState({\n        videoCollectList: res\n      })\n    })\n  }\n\n  deleteBtn = () => {\n    if (this.state.page === 1) {\n      if (this.state.ids === '') {\n        return\n      } else {\n        new Promise(resolve => {\n          this.props.delBoolCollect({\n            ids: this.state.ids,\n            user_id: sessionStorage.getItem('user_id'),\n            resolve\n          })\n        }).then(res => {\n          console.log(res)\n          if (res.suc) {\n            new Promise(resolve => {\n              this.props.getBookCollect({ user_id: sessionStorage.getItem('user_id'), resolve })\n            }).then(res => {\n              console.log(res)\n              this.setState({\n                bookCollectList: res,\n                count: 0,\n                ids: '',\n              })\n            })\n          }\n        })\n      }\n    } else {\n      if (this.state.ids === '') {\n        return\n      } else {\n        console.log('删视频')\n        // new Promise(resolve => {\n        //   this.props.delBoolCollect({\n        //     ids: this.state.ids,\n        //     user_id: sessionStorage.getItem('user_id'),\n        //     resolve\n        //   })\n        // }).then(res => {\n        //   console.log(res)\n        //   if (res.suc) {\n        //     new Promise(resolve => {\n        //       this.props.getBookCollect({ user_id: sessionStorage.getItem('user_id'), resolve })\n        //     }).then(res => {\n        //       console.log(res)\n        //       this.setState({\n        //         bookCollectList: res,\n        //         count: 0,\n        //         ids: '',\n        //       })\n        //     })\n        //   }\n        // })\n      }\n    }\n  }\n\n  onLeftClick = () => {\n    this.props.history.go(-1)\n  }\n  // 编辑按钮\n  onRightClick = () => {\n    const data = JSON.parse(JSON.stringify(this.state.bookCollectList))\n    const data2 = JSON.parse(JSON.stringify(this.state.videoCollectList))\n\n    this.state.bookCollectList.forEach((item, index, arr) => {\n      data[index].isCheck = false\n    })\n    this.state.videoCollectList.forEach((item, index, arr) => {\n      data2[index].isCheck = false\n    })\n    this.setState({\n      isEdit: !this.state.isEdit,\n      count: 0,\n      checkedStatus: false,\n      bookCollectList: data,\n      videoCollectList: data2,\n      ids: '',\n    });\n  }\n  //切换Tab取消勾选的项目\n  onTabChange = (v, i) => {\n    //console.log(v, i)\n    this.setState({ page: i })\n    const data = JSON.parse(JSON.stringify(this.state.bookCollectList))\n    const data2 = JSON.parse(JSON.stringify(this.state.videoCollectList))\n    this.state.bookCollectList.forEach((item, index, arr) => {\n      data[index].isCheck = false\n    })\n    this.state.videoCollectList.forEach((item, index, arr) => {\n      data2[index].isCheck = false\n    })\n    this.setState({\n      checkedStatus: false,\n      bookCollectList: data,\n      videoCollectList: data2,\n      count: 0,\n      ids: '',\n    })\n  }\n  //全选\n  selectAll = () => {\n    const data = JSON.parse(JSON.stringify(this.state.bookCollectList))\n    const data2 = JSON.parse(JSON.stringify(this.state.videoCollectList))\n    const checkedStatus = this.state.checkedStatus\n    if (this.state.page === 0) {//视频\n      const ids = data2.map(item => item.novel_id)\n      if (!this.state.checkedStatus) {\n        this.state.videoCollectList.forEach((item, index, arr) => {\n          data2[index].isCheck = !checkedStatus\n        })\n        this.setState({\n          checkedStatus: !checkedStatus,\n          videoCollectList: data2,\n          count: data2.length,\n          ids: ids.join(',')\n        })\n      } else {\n        this.state.videoCollectList.forEach((item, index, arr) => {\n          data2[index].isCheck = !checkedStatus\n        })\n        this.setState({\n          checkedStatus: !checkedStatus,\n          videoCollectList: data2,\n          count: 0,\n          ids: '',\n        })\n      }\n    } else {//听书\n      if (!this.state.checkedStatus) {\n        this.state.bookCollectList.forEach((item, index, arr) => {\n          data[index].isCheck = !checkedStatus\n        })\n        const ids = data.map(item => item.novel_id)\n        this.setState({\n          checkedStatus: !checkedStatus,\n          bookCollectList: data,\n          count: data.length,\n          ids: ids.join(',')\n        })\n      } else {\n        this.state.bookCollectList.forEach((item, index, arr) => {\n          data[index].isCheck = !checkedStatus\n        })\n        this.setState({\n          checkedStatus: !checkedStatus,\n          bookCollectList: data,\n          count: 0,\n          ids: ''\n        })\n      }\n    }\n  }\n  //听书单选\n  selectOne = (e, index, item) => {\n    console.log(item)\n    const data = JSON.parse(JSON.stringify(this.state.bookCollectList))\n    data[index].isCheck = e.target.checked\n    const deleteData = data.filter(val => val.isCheck === true)\n    const ids = deleteData.map(val => val.novel_id)\n    console.log(ids.join(','))\n    const flag = data.filter(val => val.isCheck === false)\n    if (flag.length === 0) {\n      this.setState({ checkedStatus: true })\n    } else {\n      this.setState({ checkedStatus: false })\n    }\n    this.setState({\n      bookCollectList: data,\n      ids: ids.join(',')\n    });\n    if (item.isCheck) {\n      this.setState({ count: this.state.count - 1 })\n    } else {\n      this.setState({ count: this.state.count + 1 })\n    }\n  }\n  //视频单选\n  selectOne2 = (e, index, item) => {\n    console.log(item)\n    const data = JSON.parse(JSON.stringify(this.state.videoCollectList))\n    data[index].isCheck = e.target.checked\n    const deleteData = data.filter(val => val.isCheck === true)\n    const ids = deleteData.map(val => val.novel_id)\n    console.log(ids.join(','))\n    const flag = data.filter(val => val.isCheck === false)\n    if (flag.length === 0) {\n      this.setState({ checkedStatus: true })\n    } else {\n      this.setState({ checkedStatus: false })\n    }\n    this.setState({\n      videoCollectList: data,\n      ids: ids.join(',')\n    });\n    if (item.isCheck) {\n      this.setState({ count: this.state.count - 1 })\n    } else {\n      this.setState({ count: this.state.count + 1 })\n    }\n  }\n\n  goToBook = (item) => {\n    console.log(item)\n    window.sessionStorage.setItem('goBack', 'true')\n    Modal.alert('提示', '详情页完善中,请去听书页播放', [\n      { text: '不去', onPress: () => console.log('cancel'), style: 'default' },\n      { text: '去听书', onPress: () => this.props.history.push(\"/book\") },\n    ]);\n  }\n\n  goToVideo = (item) => {\n    window.sessionStorage.setItem('goBack', 'true')\n    const user_id = sessionStorage.getItem('user_id');\n    this.props.history.push(`/detailVideo/video_id=${item.video_id}&user_id=${user_id}`);\n  }\n\n  render() {\n    const { bookCollectList, videoCollectList } = this.state;\n    const CheckboxItem = Checkbox.CheckboxItem;\n    const navBarProps = {\n      title: '我的收藏',\n      edit: true,\n      onLeftClick: this.onLeftClick,\n      onRightClick: this.onRightClick,\n      isEdit: this.state.isEdit\n    }\n    const videoTab = () => {\n      return (\n        this.state.isEdit ?\n          <>\n            {\n              videoCollectList.map((item, index) => (\n                <label key={item.id}>\n                  <CheckboxItem checked={item.isCheck ? true : false} onChange={(v) => this.selectOne2(v, index, item)}>\n                    <div className='collectContent'>\n                      <img style={{ width: '100%', height: '100%' }} src={item.cover_one} alt=\"\" />\n                      <p>{item.title}</p>\n                      {/* <span>昨天</span> */}\n                    </div>\n                  </CheckboxItem>\n                </label>\n              ))\n            }\n          </> :\n          <>\n            {\n              videoCollectList.map(item => (\n                <div key={item.id} className='collectContent'>\n                  <img onClick={() => this.goToVideo(item)} style={{ width: '100%', height: '100%' }} src={item.cover_one} alt=\"\" />\n                  <p>{item.title}</p>\n                  {/* <span>昨天</span> */}\n                </div>\n              ))\n            }\n          </>\n      )\n    }\n\n    const bookTab = () => {\n      return (\n        this.state.isEdit ?\n          <>\n            {\n              bookCollectList && bookCollectList.map((item, index) => (\n                <label key={item.novel_id}>\n                  <CheckboxItem checked={item.isCheck ? true : false} onChange={(v) => this.selectOne(v, index, item)}>\n                    <div className='collectContent'>\n                      <img style={{ width: '100%', height: '100%' }} src={item.poster} alt=\"\" />\n                      <p>{item.title}</p>\n                      {/* <span>昨天</span> */}\n                    </div>\n                  </CheckboxItem>\n                </label>\n              ))\n            }\n          </> :\n          <>\n            {\n              bookCollectList && bookCollectList.map(item => (\n                <div key={item.novel_id} className='collectContent'>\n                  <img onClick={() => this.goToBook(item)} style={{ width: '100%', height: '100%' }} src={item.poster} alt=\"\" />\n                  <p>{item.title}</p>\n                  {/* <span>昨天</span> */}\n                </div>\n              ))\n            }\n          </>\n      )\n    }\n    const tabs = [\n      { title: '视频' },\n      { title: '听书' },\n    ];\n    return (\n      <div style={{ backgroundColor: '#fff' }}>\n        <PublicNavBar {...navBarProps} />\n        <TabExample\n          tabs={tabs}\n          tabsContent1={videoTab}\n          tabsContent2={bookTab}\n          onTabChange={this.onTabChange}\n        />\n        <div style={{\n          display: this.state.isEdit ? 'flex' : 'none',\n          justifyContent: 'center',\n          position: 'fixed',\n          width: '100vw',\n          bottom: 0\n        }}>\n          <Button\n            onClick={this.selectAll}\n            style={{ flex: '1', borderRadius: 0, color: '#7914ee' }}\n          >\n            {this.state.checkedStatus ? '反选' : '全选'}\n          </Button>\n          <Button onClick={this.deleteBtn} style={{ flex: '1', borderRadius: 0, color: '#7914ee' }}>{this.state.count !== 0 ? `删除(${this.state.count})` : '删除'}</Button>\n        </div>\n      </div >\n    )\n  }\n}\nexport default Collect\n"]},"metadata":{},"sourceType":"module"}