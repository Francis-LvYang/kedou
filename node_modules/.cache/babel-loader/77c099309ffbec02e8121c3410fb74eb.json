{"ast":null,"code":"import _objectSpread from \"/Users/Ryan/Projects/kedou/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/Ryan/Projects/kedou/src/pages/Book/index.jsx\";\n\nimport Header from '@/components/header'; // import { category } from '@/store/action/book';\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { category } from '@/store/action/book';\nimport Tabs from '../../components/tabs';\nimport Login from '../../components/login';\nimport { detail } from '../../services/book'; // import BooksDetail from '../../components/BooksDetail'\n\nimport Audio from '../../components/Audio';\nimport './index.less';\n\nconst stateToProps = state => {\n  return {\n    tabList: state.book.tabList\n  };\n};\n\nconst mapDispatchToProps = {\n  category\n};\nlet Book = (_dec = connect(stateToProps, mapDispatchToProps), _dec(_class = (_temp = class Book extends Component {\n  constructor(props) {\n    super(props);\n\n    this.testRightCallBack = () => {\n      if (this.state.loginShow && sessionStorage.getItem('user_id')) {\n        this.setState({\n          loginShow: !this.state.loginShow\n        });\n      } else if (!this.state.loginShow && sessionStorage.getItem('user_id')) {\n        this.setState({\n          my: !this.state.my\n        });\n      } else {\n        this.setState({\n          loginShow: !this.state.loginShow,\n          novelItem: null\n        });\n      }\n    };\n\n    this.Popo = () => {\n      const arr = [{\n        src: `user_favorite_btn.png`,\n        title: '我的收藏',\n        goto: '/collect'\n      }, {\n        src: `user_feedback_btn.png`,\n        title: '意见反馈',\n        goto: '/userfeedback'\n      }, {\n        src: 'user_close_btn.png',\n        title: '退出登录',\n        goto: '/'\n      }];\n      return arr.map(e => {\n        return React.createElement(\"div\", {\n          key: e.goto,\n          onClick: () => {\n            if (e.title === '退出登录') {\n              sessionStorage.removeItem('user_id');\n              this.setState({\n                my: false\n              });\n              return false;\n            }\n\n            this.props.history.push(e.goto);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            width: '70%',\n            margin: 'auto',\n            padding: '.1rem'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: require(`@/assets/images/${e.src}`),\n          alt: \"\",\n          style: {\n            width: '100%',\n            height: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        })), React.createElement(\"p\", {\n          style: {\n            textAlign: 'center',\n            padding: '0 0 .1rem 0'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, e.title));\n      });\n    };\n\n    this.getBooKDetail = async bookId => {\n      if (!sessionStorage.getItem('user_id')) {\n        this.testRightCallBack();\n        return false;\n      }\n\n      await this.setState({\n        novelItem: null\n      });\n      await detail({\n        user_id: sessionStorage.getItem('user_id'),\n        novel_id: bookId\n      }).then(res => {\n        const serials = res.video;\n        const novelPoster = res.poster;\n        const novelTitle = res.title;\n        const novelItem = {\n          serials,\n          novelPoster,\n          novelTitle,\n          player: serials[0]\n        };\n        document.querySelector('.TabBer').style.display = 'none';\n        this.setState({\n          detailShow: true,\n          novelItem,\n          detailInfo: res\n        }, () => {\n          this.props.history.push({\n            pathname: '/book',\n            state: {\n              id: bookId\n            }\n          });\n        });\n      });\n    };\n\n    this.setDetailShow = () => {\n      document.querySelector('.TabBer').style.display = 'block';\n\n      if (document.querySelector('.am-tabs-tab-bar-wrap') && document.querySelector('.header-search') && document.querySelector('.background') && document.querySelector('.am-tab-bar-bar')) {\n        document.querySelector('.background').style.top = '0rem';\n        document.querySelector('.header-search').style.top = '0rem';\n        document.querySelector('.am-tabs-tab-bar-wrap').style.top = '1rem';\n        document.querySelector('.am-tab-bar-bar').style.bottom = '0';\n      }\n\n      this.setState({\n        detailShow: !this.state.detailShow\n      });\n    };\n\n    this.state = {\n      showHome: true,\n      loginShow: false,\n      my: false,\n      novelItem: '',\n      detailShow: false // collectSucceed: []\n\n    };\n  }\n\n  componentDidMount() {\n    this.props.category({\n      page: 1\n    });\n\n    if (this.props.history.location.state) {\n      const id = this.props.history.location.state.id;\n\n      if (id) {\n        this.getBooKDetail(id);\n      }\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          loginShow = _this$state.loginShow,\n          my = _this$state.my,\n          detailShow = _this$state.detailShow,\n          novelItem = _this$state.novelItem,\n          detailInfo = _this$state.detailInfo,\n          tabList = this.props.tabList,\n          getBooKDetail = this.getBooKDetail,\n          testRightCallBack = this.testRightCallBack,\n          setDetailShow = this.setDetailShow;\n\n    const novelItem2 = _objectSpread({}, novelItem, {\n      setDetailShow,\n      detailInfo,\n      getBooKDetail\n    });\n\n    const bookHeader = {\n      // leftCallBack: this.testCallBack,\n      rightCallBack: testRightCallBack,\n      type: 'book'\n    };\n    const tabsParameter = {\n      tabList: tabList,\n      getBooKDetail,\n      testRightCallBack // setCollect,\n      // collectSucceed\n\n    };\n    return React.createElement(\"div\", {\n      id: \"home_book\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: !detailShow ? {\n        display: 'block'\n      } : {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Header, Object.assign({}, bookHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    })), React.createElement(Tabs, Object.assign({}, tabsParameter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    })), loginShow && React.createElement(Login, {\n      rightCallBack: this.testRightCallBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), my && React.createElement(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '1rem',\n        left: '.1rem',\n        zIndex: '1000',\n        padding: '.1rem',\n        backgroundColor: '#fff',\n        borderRadius: '.1rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, this.Popo(), React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '-.2rem',\n        left: '20%',\n        borderTop: ' .1rem solid transparent',\n        borderBottom: '.1rem solid #fff',\n        borderLeft: '.1rem solid transparent',\n        borderRight: '.1rem solid transparent'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }))), novelItem && React.createElement(Audio, Object.assign({}, novelItem2, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    })));\n  }\n\n}, _temp)) || _class);\nexport default Book;","map":{"version":3,"sources":["/Users/Ryan/Projects/kedou/src/pages/Book/index.jsx"],"names":["Header","React","Component","connect","category","Tabs","Login","detail","Audio","stateToProps","state","tabList","book","mapDispatchToProps","Book","constructor","props","testRightCallBack","loginShow","sessionStorage","getItem","setState","my","novelItem","Popo","arr","src","title","goto","map","e","removeItem","history","push","width","margin","padding","require","height","textAlign","getBooKDetail","bookId","user_id","novel_id","then","res","serials","video","novelPoster","poster","novelTitle","player","document","querySelector","style","display","detailShow","detailInfo","pathname","id","setDetailShow","top","bottom","showHome","componentDidMount","page","location","render","novelItem2","bookHeader","rightCallBack","type","tabsParameter","position","left","zIndex","backgroundColor","borderRadius","borderTop","borderBottom","borderLeft","borderRight"],"mappings":"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","sourcesContent":["import Header from '@/components/header';\n// import { category } from '@/store/action/book';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { category } from '@/store/action/book'\nimport Tabs from '../../components/tabs'\nimport Login from '../../components/login'\nimport { detail } from '../../services/book'\n// import BooksDetail from '../../components/BooksDetail'\nimport Audio from '../../components/Audio'\nimport './index.less'\nconst stateToProps = (state) => {\n\treturn {\n\t\ttabList: state.book.tabList,\n\t}\n}\nconst mapDispatchToProps = {\n\tcategory,\n};\n@connect(\n\tstateToProps,\n\tmapDispatchToProps\n)\nclass Book extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tshowHome: true,\n\t\t\tloginShow: false,\n\t\t\tmy: false,\n\t\t\tnovelItem: '',\n\t\t\tdetailShow: false\n\t\t\t// collectSucceed: []\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.props.category({\n\t\t\tpage: 1\n\t\t})\n\t\tif (this.props.history.location.state) {\n\t\t\tconst { id } = this.props.history.location.state\n\t\t\tif (id) {\n\t\t\t\tthis.getBooKDetail(id)\n\t\t\t}\n\t\t}\n\n\n\t}\n\ttestRightCallBack = () => {\n\t\tif (this.state.loginShow && sessionStorage.getItem('user_id')) {\n\t\t\tthis.setState({\n\t\t\t\tloginShow: !this.state.loginShow\n\t\t\t})\n\t\t} else if (!this.state.loginShow && sessionStorage.getItem('user_id')) {\n\t\t\tthis.setState({\n\t\t\t\tmy: !this.state.my\n\t\t\t})\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tloginShow: !this.state.loginShow,\n\t\t\t\tnovelItem: null\n\t\t\t})\n\t\t}\n\n\n\t}\n\tPopo = () => {\n\t\tconst arr = [\n\t\t\t{\n\t\t\t\tsrc: `user_favorite_btn.png`,\n\t\t\t\ttitle: '我的收藏',\n\t\t\t\tgoto: '/collect'\n\t\t\t}, {\n\t\t\t\tsrc: `user_feedback_btn.png`,\n\t\t\t\ttitle: '意见反馈',\n\t\t\t\tgoto: '/userfeedback'\n\t\t\t},\n\t\t\t{\n\t\t\t\tsrc: 'user_close_btn.png',\n\t\t\t\ttitle: '退出登录',\n\t\t\t\tgoto: '/'\n\t\t\t}\n\t\t]\n\t\treturn (\n\t\t\tarr.map(e => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={e.goto} onClick={() => {\n\t\t\t\t\t\tif (e.title === '退出登录') {\n\t\t\t\t\t\t\tsessionStorage.removeItem('user_id')\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tmy: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.props.history.push(e.goto)\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\twidth: '70%',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\tpadding: '.1rem'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<img src={require(`@/assets/images/${e.src}`)} alt=\"\" style={{\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p style={{\n\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\tpadding: '0 0 .1rem 0'\n\t\t\t\t\t\t}}>{e.title}</p>\n\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})\n\t\t)\n\t}\n\tgetBooKDetail = async (bookId) => {\n\t\tif (!sessionStorage.getItem('user_id')) {\n\t\t\tthis.testRightCallBack()\n\t\t\treturn false\n\t\t}\n\t\tawait this.setState({\n\t\t\tnovelItem: null\n\t\t})\n\t\tawait detail({\n\t\t\tuser_id: sessionStorage.getItem('user_id'),\n\t\t\tnovel_id: bookId\n\t\t}).then(res => {\n\n\t\t\tconst serials = res.video\n\t\t\tconst novelPoster = res.poster\n\t\t\tconst novelTitle = res.title\n\t\t\tconst novelItem = {\n\t\t\t\tserials,\n\t\t\t\tnovelPoster,\n\t\t\t\tnovelTitle,\n\t\t\t\tplayer: serials[0]\n\t\t\t}\n\t\t\tdocument.querySelector('.TabBer').style.display = 'none'\n\t\t\tthis.setState({\n\t\t\t\tdetailShow: true,\n\t\t\t\tnovelItem,\n\t\t\t\tdetailInfo: res\n\t\t\t}, () => {\n\t\t\t\tthis.props.history.push({\n\t\t\t\t\tpathname: '/book',\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tid: bookId\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\n\t}\n\t// setCollect = (novel_id) => {\n\t// \tif (!sessionStorage.getItem('user_id')) {\n\t// \t\tthis.testRightCallBack()\n\t// \t\treturn false\n\t// \t}\n\t// \tconst collectSucceed=this.state.collectSucceed\n\t// \tcollect({\n\t// \t\tuser_id: sessionStorage.getItem('user_id'),\n\t// \t\tnovel_id: novel_id\n\t// \t}).then(res => {\n\t// \t\tif (res.code === 0) {\n\t// \t\t\tToast.info(res.suc)\n\t// \t\t\tif(res.suc==='取消成功'){\n\t// \t\t\t\tcollectSucceed.splice(collectSucceed.findIndex(item => item === novel_id), 1)\n\t// \t\t\t\tthis.setState({\n\t// \t\t\t\t\tcollectSucceed\n\t// \t\t\t\t})\n\t// \t\t\t\treturn false\n\t// \t\t\t}\n\t// \t\t\tcollectSucceed.push(novel_id)\n\t// \t\t\tthis.setState({\n\t// \t\t\t\tcollectSucceed: collectSucceed\n\t// \t\t\t})\n\t// \t\t} else {\n\t// \t\t\tToast.info(res.err)\n\t// \t\t}\n\n\t// \t})\n\t// \tconsole.log(123);\n\n\t// }\n\tsetDetailShow = () => {\n\t\tdocument.querySelector('.TabBer').style.display = 'block'\n\t\tif (document.querySelector('.am-tabs-tab-bar-wrap') && document.querySelector('.header-search') && document.querySelector('.background') && document.querySelector('.am-tab-bar-bar')) {\n\t\t\tdocument.querySelector('.background').style.top = '0rem'\n\t\t\tdocument.querySelector('.header-search').style.top = '0rem'\n\t\t\tdocument.querySelector('.am-tabs-tab-bar-wrap').style.top = '1rem'\n\t\t\tdocument.querySelector('.am-tab-bar-bar').style.bottom = '0'\n\t\t}\n\t\tthis.setState({\n\t\t\tdetailShow: !this.state.detailShow\n\t\t})\n\t}\n\trender() {\n\t\tconst {\n\t\t\tstate: {\n\t\t\t\tloginShow,\n\t\t\t\tmy,\n\t\t\t\tdetailShow,\n\t\t\t\tnovelItem,\n\t\t\t\t// collectSucceed,\n\t\t\t\tdetailInfo\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\ttabList\n\t\t\t},\n\t\t\tgetBooKDetail,\n\t\t\ttestRightCallBack,\n\t\t\tsetDetailShow\n\t\t\t// setCollect\n\t\t} = this\n\t\tconst novelItem2 = {\n\t\t\t...novelItem,\n\t\t\tsetDetailShow,\n\t\t\tdetailInfo,\n\t\t\tgetBooKDetail\n\t\t}\n\t\tconst bookHeader = {\n\t\t\t// leftCallBack: this.testCallBack,\n\t\t\trightCallBack: testRightCallBack,\n\t\t\ttype: 'book'\n\t\t}\n\t\tconst tabsParameter = {\n\t\t\ttabList: tabList,\n\t\t\tgetBooKDetail,\n\t\t\ttestRightCallBack\n\t\t\t// setCollect,\n\t\t\t// collectSucceed\n\t\t}\n\t\treturn (\n\t\t\t<div id='home_book'>\n\t\t\t\t<div style={!detailShow ? { display: 'block' } : { display: 'none' }}>\n\t\t\t\t\t<Header {...bookHeader} />\n\t\t\t\t\t<Tabs {...tabsParameter} />\n\t\t\t\t\t{loginShow && <Login rightCallBack={this.testRightCallBack} />}\n\t\t\t\t\t{\n\t\t\t\t\t\tmy && <div style={{\n\t\t\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\t\t\ttop: '1rem',\n\t\t\t\t\t\t\tleft: '.1rem',\n\t\t\t\t\t\t\tzIndex: '1000',\n\t\t\t\t\t\t\tpadding: '.1rem',\n\t\t\t\t\t\t\tbackgroundColor: '#fff',\n\t\t\t\t\t\t\tborderRadius: '.1rem'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.Popo()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\ttop: '-.2rem',\n\t\t\t\t\t\t\t\tleft: '20%',\n\t\t\t\t\t\t\t\tborderTop: ' .1rem solid transparent',\n\t\t\t\t\t\t\t\tborderBottom: '.1rem solid #fff',\n\t\t\t\t\t\t\t\tborderLeft: '.1rem solid transparent',\n\t\t\t\t\t\t\t\tborderRight: '.1rem solid transparent'\n\t\t\t\t\t\t\t}}></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tnovelItem && <Audio {...novelItem2} />\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default Book;\n"]},"metadata":{},"sourceType":"module"}