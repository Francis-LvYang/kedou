{"ast":null,"code":"var _jsxFileName = \"/Users/gaomengzhou/Projects/kedou/src/components/Audio/index.jsx\";\nimport React from 'react';\nimport ReactAplayer from 'react-aplayer';\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onPlay = () => {\n      console.log('on play');\n    };\n\n    this.onPause = () => {\n      this.ap.pause();\n      console.log('on pause');\n    };\n\n    this.onInit = ap => {\n      this.ap = ap;\n    };\n\n    this.changeSrc = async (url, num) => {\n      await this.setState({\n        show: false\n      });\n      await this.setState({\n        url,\n        show: true,\n        serialShow: !this.state.serialShow\n      }, () => {\n        this.ap.toggle();\n        document.querySelector('.aplayer-author').innerHTML = `第${num}集`;\n        document.querySelector('.aplayer-icon-loop').remove();\n      });\n    };\n\n    this.state = {\n      serialShow: false,\n      playerList: [],\n      player: '',\n      show: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      name: this.props.novelTitle,\n      url: this.props.player.src,\n      cover: this.props.novelPoster,\n      show: true\n    }, () => {\n      document.querySelector('.aplayer-author').innerHTML = '第1集';\n      document.querySelector('.aplayer-icon-loop').remove();\n    });\n  }\n\n  componentWillUnmount() {\n    this.onPause();\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.serials) {\n      return {\n        playerList: props.serials\n      };\n    }\n\n    return null;\n  } // event binding example\n\n\n  render() {\n    const _this$state = this.state,\n          playerList = _this$state.playerList,\n          name = _this$state.name,\n          url = _this$state.url,\n          cover = _this$state.cover,\n          show = _this$state.show,\n          changeSrc = this.changeSrc;\n    const player = {\n      theme: '#F57F17',\n      lrcType: 3,\n      audio: [{\n        name,\n        url,\n        cover,\n        theme: '#ebd0c2'\n      }]\n    };\n    return React.createElement(\"div\", {\n      className: \"player\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, this.state.serialShow && React.createElement(\"div\", {\n      className: \"playerSerial\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, playerList.map(e => React.createElement(\"p\", {\n      onClick: () => {\n        changeSrc(e.src, e.serial);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"\\u7B2C\", e.serial, \"\\u96C6\"))), React.createElement(\"p\", {\n      className: \"select\",\n      onClick: () => {\n        this.setState({\n          serialShow: !this.state.serialShow\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"\\u9009\\u96C6\"), show && React.createElement(ReactAplayer, Object.assign({}, player, {\n      onInit: this.onInit,\n      onPlay: this.onPlay,\n      onPause: this.onPause,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/gaomengzhou/Projects/kedou/src/components/Audio/index.jsx"],"names":["React","ReactAplayer","App","Component","constructor","props","onPlay","console","log","onPause","ap","pause","onInit","changeSrc","url","num","setState","show","serialShow","state","toggle","document","querySelector","innerHTML","remove","playerList","player","componentDidMount","name","novelTitle","src","cover","novelPoster","componentWillUnmount","getDerivedStateFromProps","serials","render","theme","lrcType","audio","map","e","serial"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactAplayer from 'react-aplayer';\n\nexport default class App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tserialShow: false,\n\t\t\tplayerList: [],\n\t\t\tplayer: '',\n\t\t\tshow: false\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tname: this.props.novelTitle,\n\t\t\turl: this.props.player.src,\n\t\t\tcover: this.props.novelPoster,\n\t\t\tshow: true\n\t\t}, () => {\n\t\t\tdocument.querySelector('.aplayer-author').innerHTML = '第1集'\n\t\t\tdocument.querySelector('.aplayer-icon-loop').remove()\n\t\t})\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.onPause()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state) {\n\t\tif (props.serials) {\n\t\t\treturn {\n\t\t\t\tplayerList: props.serials\n\t\t\t}\n\t\t}\n\t\treturn null\n\t}\n\t// event binding example\n\tonPlay = () => {\n\t\tconsole.log('on play');\n\t};\n\n\tonPause = () => {\n\t\tthis.ap.pause()\n\t\tconsole.log('on pause');\n\t};\n\n\t// example of access aplayer instance\n\tonInit = ap => {\n\t\tthis.ap = ap;\n\t};\n\tchangeSrc = async (url, num) => {\n\t\tawait this.setState({\n\t\t\tshow: false\n\t\t})\n\t\tawait this.setState({\n\t\t\turl,\n\t\t\tshow: true,\n\t\t\tserialShow: !this.state.serialShow\n\t\t}, () => {\n\t\t\tthis.ap.toggle()\n\t\t\tdocument.querySelector('.aplayer-author').innerHTML = `第${num}集`\n\t\t\tdocument.querySelector('.aplayer-icon-loop').remove()\n\t\t})\n\n\t}\n\trender() {\n\t\tconst {\n\t\t\tstate: {\n\t\t\t\tplayerList,\n\t\t\t\tname,\n\t\t\t\turl,\n\t\t\t\tcover,\n\t\t\t\tshow\n\t\t\t},\n\t\t\tchangeSrc\n\t\t} = this\n\t\tconst player = {\n\t\t\ttheme: '#F57F17',\n\t\t\tlrcType: 3,\n\t\t\taudio: [\n\t\t\t\t{\n\t\t\t\t\tname,\n\t\t\t\t\turl,\n\t\t\t\t\tcover,\n\t\t\t\t\ttheme: '#ebd0c2'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn (\n\t\t\t<div className='player'>\n\t\t\t\t{\n\t\t\t\t\tthis.state.serialShow && <div className='playerSerial'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tplayerList.map(e => (\n\t\t\t\t\t\t\t\t<p onClick={() => {\n\t\t\t\t\t\t\t\t\tchangeSrc(e.src, e.serial)\n\t\t\t\t\t\t\t\t}}>第{e.serial}集</p>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<p className='select' onClick={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tserialShow: !this.state.serialShow\n\t\t\t\t\t})\n\t\t\t\t}} >选集</p>\n\t\t\t\t{show && <ReactAplayer\n\t\t\t\t\t{...player}\n\t\t\t\t\tonInit={this.onInit}\n\t\t\t\t\tonPlay={this.onPlay}\n\t\t\t\t\tonPause={this.onPause}\n\t\t\t\t/>}\n\n\t\t\t</div>\n\t\t);\n\t}\n}"]},"metadata":{},"sourceType":"module"}